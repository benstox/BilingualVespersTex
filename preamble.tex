\documentclass[12pt]{article} % use larger type; default would be 10pt

% usual packages loading:
\usepackage{forloop}
\usepackage{calc}
\usepackage{fontspec}
\usepackage{graphicx} % support the \includegraphics command and options
\usepackage[allowdeprecated=false]{gregoriotex} % for gregorio score inclusion
\usepackage{fullpage} % to reduce the margins
\usepackage{titlesec}
\usepackage[oldstyle]{libertine}
\usepackage{lettrine}
\setlength{\parindent}{-0.25in}
% for English psalm pointing
\usepackage[normalem]{ulem}
\setlength{\ULdepth}{2pt}

% Repeat something:
\newcounter{loopcntr}
\newcommand{\repeatthing}[2][1]{%
  \forloop{loopcntr}{0}{\value{loopcntr}<#1}{#2}%
}

% dual language parallel text thing
\usepackage{reledmac}
\usepackage{reledpar}

% STYLE FOR THE TITLE PAGE
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{}
\chead{\color{benblue1}{ \repeatthing[17]{\greornamentation{2}{12}} }}
\rhead{}
\lfoot{}
\cfoot{\color{benblue1}{ \repeatthing[17]{\greornamentation{2}{12}} }\\ \color{black}\thepage}
\rfoot{}
\renewcommand{\headrulewidth}{0pt}
\setlength{\headsep}{25pt}

%the bilingual stuff seems to necessitate this stuff being reset each time;
%without this function the initial letter ends up much smaller and the red antiphon number
%appears over top of the initial, not above it as desired
\newcommand{\myaboveinitial}[1]{%
    \expandafter\renewcommand\csname greinitialformat\endcsname[1]{%
        \fontsize{43}{43}\selectfont ##1
    }
    \gresetfirstlineaboveinitial{\textcolor{benred8}{\raisebox{6.0mm}{\small \textsc{\textbf{#1}}}}}{}
}

% RED
\definecolor{benred8}{HTML}{E82C00} 

% BLUE
\definecolor{benblue1}{HTML}{2B22C7}

% YELLOWS
\definecolor{benyellow1}{HTML}{FFD435}
\definecolor{benyellow2}{HTML}{7C6F3B}

% DEFINE THE FORMATTING OF
% PSALM TEXT
\newenvironment{psalmtext}{\leftskip 0.25in}{\vspace{2 mm}}
\newenvironment{rubric}{\color{benred8} \itshape \leftskip 0in \setlength{\parindent}{0.25in}}{\vspace{2 mm}}
\newenvironment{response}{\leftskip 0in \setlength{\parindent}{0in}}{\vspace{2 mm}}
\newenvironment{lettrinePar}
  {\par\leftskip=0.30in \rightskip=0em}
  {\par} % since switching to reledpar from eledpar lettrine no longer seems to work properly!
         % this environment is a compromise

% REDUCES SUBSECTION SPACE
\def\subspace{\vspace{-13 mm}}

% MAKES Flexa : TEXT
\def\flex{\textit{\textcolor{benred8}{Flexa :}}}

% MAKES Flex : TEXT
\def\flexeng{\textit{\textcolor{benred8}{Flex :}}}

% MAKES Cantor : TEXT
\def\cantor{\textit{\textcolor{benred8}{Cantor :}}}

% MAKES vel : TEXT
\def\vel{\textit{\textcolor{benred8}{vel :}}}

% MAKES deinde : TEXT
\def\deinde{\textit{\textcolor{benred8}{deinde :}}}

% MAKES Repetitur : TEXT
\def\repetitur{\textit{\textcolor{benred8}{Repetitur :}}}

% MAKES Repeat: TEXT
\def\repetitureng{\textit{\textcolor{benred8}{Repeat:}}}

% MAKES secreto usque ad TEXT
\def\secreto{\textit{\textcolor{benred8}{secreto usque ad}}}

% MAKES secret until TEXT
\def\secretoeng{\textit{\textcolor{benred8}{secret until}}}

% MAKES T.P. TEXT
\def\TemporePaschale{\textit{\textcolor{benred8}{T. P.}}}

% MAKES RED PIPE FOR ENGLISH CADENCES
\def\pipe{\textcolor{benred8}{\symbol{"01C1}}}

% MAKES ALL \GreStars RED
\let\OldGreStar\GreStar
\renewcommand{\GreStar}{\textcolor{benred8}{\OldGreStar}}

% MAKES ALL \GreDaggers RED
\let\OldGreDagger\GreDagger
\renewcommand{\GreDagger}{\textcolor{benred8}{\OldGreDagger}}

% MAKES ALL \Vbars RED
\let\oldVbar\Vbar
\def\VVbar{\textcolor{benred8}{\oldVbar\oldVbar .}}
\renewcommand{\Vbar}{\textcolor{benred8}{\oldVbar .}}

% MAKES ALL \Rbars RED
\let\oldRbar\Rbar
\renewcommand{\Rbar}{\textcolor{benred8}{\oldRbar .}}

% MAKES ALL \Abars RED
\let\oldAbar\Abar
\renewcommand{\Abar}{\textcolor{benred8}{\oldAbar .}}

% MAKES ALL \grealtcrosses RED
\let\oldgrealtcross\grealtcross
\renewcommand{\grealtcross}{\textcolor{benred8}{\oldgrealtcross}}

% ANOTHER CROSS GLYPH USED FOR THE SIGN OF THE CROSS WITH THUMB ON CHEST
\newcommand{\grebencross}{\fontspec{gresym3.ttf}\textcolor{benred8}{T}}

% FORMAT SECTIONS - use titlesec package
\titleformat{\section}{\centering\scshape\Huge\color{benred8}}{}{1em}{}
\titlespacing*{\section}{0pt}{0pt}{0pt}

% FORMAT SUBSECTIONS - use titlesec package
\titleformat{\subsection}{\centering\normalfont\color{benred8}}{}{1em}{}
\titlespacing*{\subsection}{0pt}{0pt}{0.25pt}

% RED TITLE e.g Psalm number, "Oratio", "Capitulum", etc.
\newcommand{\redTitle}[1]{{
\centering
\textcolor{benred8}{#1}

}}


% SPACE BETWEEN Capitulum AND BIBLE VERSE
\def\capitulumSpace{\hspace{20 mm}}

% ANNOTATION STYLE
\grechangestyle{annotation}{\small\scshape\bfseries\color{benred8}}
\grechangedim{annotationraise}{-3 mm}{scalable}

% Sicut incensum R/ indent, e.g. versicle after first hymn at Sunday Vespers
\newlength{\sicutIncensumIndent}
\setlength{\sicutIncensumIndent}{2.3mm}
